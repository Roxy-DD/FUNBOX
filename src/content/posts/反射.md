---
title: 'åå°„'
description: 'goä¸­çš„åå°„'
published: 2025-07-15
draft: false
tags: [Go]
category: Goç¬”è®°
pinned: false
image: ''
---

# **åå°„çš„å¼•å…¥**

ã€1ã€‘åå°„å¯ä»¥åšä»€ä¹ˆï¼Ÿ
 1ï¼‰åå°„å¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€è·å–å˜é‡çš„å„ç§ä¿¡æ¯ï¼Œæ¯”å¦‚å˜é‡çš„ç±»å‹ï¼Œç±»åˆ«ç­‰ä¿¡æ¯
 2)å¦‚æœæ˜¯ç»“æ„ä½“å˜é‡ï¼Œè¿˜å¯ä»¥è·å–åˆ°ç»“æ„ä½“æœ¬èº«çš„ä¿¡æ¯(åŒ…æ‹¬ç»“æ„ä½“çš„å­—æ®µã€æ–¹æ³•)
 3)é€šè¿‡åå°„ï¼Œå¯ä»¥ä¿®æ”¹å˜é‡çš„å€¼ï¼Œå¯ä»¥è°ƒç”¨å…³è”çš„æ–¹æ³•ã€‚
 4)ä½¿ç”¨åå°„ï¼Œéœ€è¦import("reflect")
 ã€2ã€‘åå°„ç›¸å…³çš„å‡½æ•°
 1)reflect.TypeOf(å˜é‡å)ï¼Œè·å–å˜é‡çš„ç±»å‹ï¼Œè¿”å›reflect.Typeç±»å‹
 2)reflect.ValueOf(å˜é‡å)ï¼Œè·å–å˜é‡çš„å€¼ï¼Œè¿”å›reflect.Valueç±»å‹(reflect.Valueæ˜¯ä¸€ä¸ªç»“æ„ä½“ç±»å‹),é€šè¿‡reflect.Valueï¼Œå¯ä»¥è·å–åˆ°å…³äºè¯¥å˜é‡çš„å¾ˆå¤šä¿¡æ¯ã€‚

![PixPin_2025-07-15_18-23-14](https://siyuan-roxy.oss-cn-chengdu.aliyuncs.com/PixPin_2025-07-15_18-23-14-20250715182317-f4swr52.png)![PixPin_2025-07-15_18-23-29](https://siyuan-roxy.oss-cn-chengdu.aliyuncs.com/PixPin_2025-07-15_18-23-29-20250715182331-0m1geli.png)

# **å¯¹åŸºæœ¬æ•°æ®ç±»å‹åå°„**

ã€1ã€‘åå°„ç›¸å…³çš„å‡½æ•°
 1)reflect.TypeOf(å˜é‡å)ï¼Œè·å–å˜é‡çš„ç±»å‹ï¼Œè¿”å›reflect.Typeç±»å‹
 2)reflectValueOfå˜é‡å)ï¼Œè·å–å˜é‡çš„å€¼ï¼Œè¿”å›reflect.Valueç±»å‹(reflect.Valueæ˜¯ä¸€ä¸ªç»“æ„ä½“ç±»å‹),é€šè¿‡reflect.Valueï¼Œå¯ä»¥è·å–åˆ°å…³äºè¯¥å˜é‡çš„å¾ˆ
 å¤šä¿¡æ¯ã€‚
 ã€2ã€‘ä»£ç ï¼š

```go
package main

import (
	"fmt"
	"reflect"
)

//åˆ©ç”¨ä¸€ä¸ªå‡½æ•°,å‡½æ•°çš„å‚æ•°å®šä¹‰ä¸ºç©ºæ¥å£:
func testReflect(i interface{})  {//ç©ºæ¥å£æ²¡æœ‰ä»»ä½•æ–¹æ³•ï¼Œæ‰€ä»¥å¯ä»¥ç†è§£ä¸ºæ‰€æœ‰ç±»å‹éƒ½å®ç°äº†ç©ºæ¥å£ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºæˆ‘ä»¬å¯ä»¥æŠŠä»»ä½•ä¸€ä¸ªå˜é‡èµ‹ç»™ç©ºæ¥å£ã€‚
	//1.è°ƒç”¨TypeOfå‡½æ•°,è¿”å›reflect.Typeç±»å‹æ•°æ®:
	reType := reflect.TypeOf(i)
	fmt.Println("reType:",reType)
	fmt.Printf("reTypeçš„å…·ä½“ç±»å‹æ˜¯:%T",reType)
	//2.è°ƒç”¨ValueOfå‡½æ•°,è¿”å›reflect.Valueç±»å‹æ•°æ®:
	reValue := reflect.ValueOf(i)
	fmt.Println("reValue",reValue)
	fmt.Printf("reValueçš„å…·ä½“ç±»å‹æ˜¯:%T",reValue)
	//num1 := 100
	//å¦‚æœçœŸæƒ³è·å–reValueçš„æ•°å€¼,è¦è°ƒç”¨Intæ–¹æ³•ï¼šè¿”å›væŒæœ‰çš„æœ‰ç¬¦å·æ•´æ•°
	num2 := 80 + reValue.Int()
	fmt.Println(num2)

	//reValueè½¬æˆç©ºæ¥å£ï¼š
	i2 := reValue.Interface()
	//ç±»å‹æ–­è¨€ï¼š
	n := i2.(int)
	n2 := n + 30 
	fmt.Println(n2)

}
func main()  {
	//å¯¹åŸºæœ¬æ•°æ®ç±»å‹è¿›è¡Œåå°„:
	//å®šä¹‰ä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹:
	var num int = 100
	testReflect(num)

}
```

![PixPin_2025-07-15_22-05-28](https://siyuan-roxy.oss-cn-chengdu.aliyuncs.com/PixPin_2025-07-15_22-05-28-20250715220533-4eovd64.png)
 è¿™æ®µä»£ç æ¼”ç¤ºäº† Go ä¸­åå°„ï¼ˆreflectï¼‰çš„æ ¸å¿ƒç”¨æ³•ï¼Œå¹¶ä¸”è¿˜ç»“åˆäº†ç±»å‹æ–­è¨€ã€‚
 æˆ‘æ¥å¸®ä½ è¯¦ç»†è®²è§£ï¼ŒåŒ…æ‹¬ï¼š

- ä¸ºä»€ä¹ˆè¦ç”¨ reflect
- æ¯ä¸€æ­¥å¹²äº†ä»€ä¹ˆ
- interface{} çš„ä½œç”¨
- æœ€åæ–­è¨€éƒ¨åˆ†ä¸ºä»€ä¹ˆéœ€è¦ã€æ€ä¹ˆåš

------

## âœ… å…ˆçœ‹ big pictureï¼šåšäº†ä»€ä¹ˆï¼Ÿ

- å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°ï¼štestReflect(i interface{})
- æ¥æ”¶ä»»ä½•ç±»å‹çš„å€¼ï¼ˆå› ä¸ºå‚æ•°æ˜¯ interface{}ï¼Œå³ç©ºæ¥å£ï¼‰
- ç”¨åå°„æ‹¿åˆ°ï¼š
  - ç±»å‹ä¿¡æ¯ï¼ˆreflect.Typeï¼‰
  - å€¼ä¿¡æ¯ï¼ˆreflect.Valueï¼‰
- é€šè¿‡ reValue.Int() è·å–å®é™…çš„ int æ•°å€¼
- æœ€åé€šè¿‡ reValue.Interface() è½¬å› interface{}ï¼Œå†ç”¨ç±»å‹æ–­è¨€æ‹¿åˆ°çœŸæ­£çš„ int

------

## ğŸ§© é€è¡Œè®²è§£

### ğŸŒ± ç©ºæ¥å£ï¼šä¸‡èƒ½å‚æ•°

```go
func testReflect(i interface{})
```

- åœ¨ Go é‡Œï¼Œç©ºæ¥å£ interface{} è¡¨ç¤ºä»»æ„ç±»å‹éƒ½å¯ä»¥ä¼ è¿›æ¥
- æ‰€ä»¥å¯ä»¥å¯¹ä»»æ„å€¼è¿›è¡Œåå°„

------

### 1ï¸âƒ£ è·å–ç±»å‹

```go
reType := reflect.TypeOf(i)
fmt.Println("reType:", reType) // è¾“å‡ºï¼šint
fmt.Printf("reTypeçš„å…·ä½“ç±»å‹æ˜¯:%T", reType) // è¾“å‡ºï¼š*reflect.rtypeï¼ˆæˆ– reflect.Typeï¼‰
```

- reflect.TypeOf(i) è¿”å›ä¸€ä¸ª reflect.Type å¯¹è±¡
- å¯ä»¥ç”¨å®ƒçœ‹å˜é‡çš„ç±»å‹ï¼Œæ¯”å¦‚ intã€stringã€struct ç­‰

------

### 2ï¸âƒ£ è·å–å€¼

```go
reValue := reflect.ValueOf(i)
fmt.Println("reValue", reValue) // è¾“å‡ºï¼š100
fmt.Printf("reValueçš„å…·ä½“ç±»å‹æ˜¯:%T", reValue) // reflect.Value
```

- reflect.ValueOf(i) è¿”å› reflect.Value
- reflect.Value å¯ä»¥è¿›ä¸€æ­¥æ“ä½œï¼šè·å–å€¼ã€ä¿®æ”¹å€¼ï¼ˆå¦‚æœå¯ä¿®æ”¹ï¼‰

------

### 3ï¸âƒ£ çœŸæ­£è·å–æ•°å€¼

```go
num2 := 80 + reValue.Int()
fmt.Println(num2)
```

- å› ä¸º reValue æ˜¯ int ç±»å‹çš„å€¼ï¼Œæƒ³å¾—åˆ°å®ƒçš„æ•°å€¼ï¼Œéœ€è¦ç”¨ reValue.Int() æ–¹æ³•
- Int() è¿”å› int64ï¼ˆæ³¨æ„æ˜¯ int64ï¼‰
- å¯ä»¥åšåŠ æ³•è¿ç®—

------

### 4ï¸âƒ£ è½¬å› interface{} å¹¶æ–­è¨€

```go
i2 := reValue.Interface()
n := i2.(int) // ç±»å‹æ–­è¨€
n2 := n + 30
fmt.Println(n2)
```

è¿™é‡Œå¾ˆå…³é”®ï¼š

- reValue.Interface() è¿”å›ä¸€ä¸ªç©ºæ¥å£ï¼ˆinterface{}ï¼‰
- æƒ³è¦æ‹¿åˆ°çœŸæ­£çš„ intï¼Œéœ€è¦å‘Šè¯‰ç¼–è¯‘å™¨ï¼šæˆ‘ç¡®å®šè¿™ä¸ª interface{} é‡Œè£…çš„å°±æ˜¯ int
- æ‰€ä»¥ç”¨ ç±»å‹æ–­è¨€ï¼ši2.(int)

ç±»å‹æ–­è¨€è¯­æ³•ï¼š

```go
v, ok := i2.(int)
```

- å¦‚æœæ˜¯ int ç±»å‹ï¼šok == true
- å¦‚æœä¸æ˜¯ int ç±»å‹ï¼šok == falseï¼Œv æ˜¯é»˜è®¤å€¼ï¼ˆ0ï¼‰

è¿™é‡Œç›´æ¥ç”¨ï¼š

```go
n := i2.(int)
```

- å¦‚æœä¸æ˜¯ intï¼Œä¼š panicï¼ˆè¿è¡Œæ—¶æŠ¥é”™ï¼‰

------

## âœ… ä¸ºä»€ä¹ˆéœ€è¦ç±»å‹æ–­è¨€ï¼Ÿ

å› ä¸ºï¼š

- ç©ºæ¥å£ interface{} è‡ªèº«ä»€ä¹ˆéƒ½ä¸èƒ½åšï¼Œåªèƒ½è£…å€¼
- è¦æƒ³ç”¨é‡Œé¢çš„å€¼ï¼ˆæ¯”å¦‚åšåŠ æ³•ã€è°ƒç”¨æ–¹æ³•ï¼‰ï¼Œå¿…é¡»å…ˆç¡®å®šå…·ä½“ç±»å‹

ç±»å‹æ–­è¨€ï¼šè®©ç¼–è¯‘å™¨/è¿è¡Œæ—¶çŸ¥é“ï¼šæˆ‘ç¡®å®šè¿™æ˜¯ intï¼Œç„¶åå°±èƒ½å½“ä½œ int ç”¨ã€‚

------

## ğŸ”§ æ€»ç»“ä¸‹æµç¨‹ï¼š

| æ­¥éª¤                | ä½œç”¨                                 |
| ------------------- | ------------------------------------ |
| reflect.TypeOf(i)   | å¾—åˆ°ç±»å‹                             |
| reflect.ValueOf(i)  | å¾—åˆ°å€¼                               |
| reValue.Int()       | ä» reflect.Value å¾—åˆ°çœŸå®çš„ int æ•°å€¼ |
| reValue.Interface() | è½¬æˆ interface{}                     |
| .(int)              | ç±»å‹æ–­è¨€ï¼Œæ‹¿åˆ°å…·ä½“ç±»å‹çš„å€¼           |

------

## âœ ä¸ºä»€ä¹ˆè¦ Interface() å†æ–­è¨€ï¼Ÿ

- reflect.Value æ˜¯åå°„çš„å®¹å™¨ï¼Œå¦‚æœè¦æ‹¿å›ã€ŒåŸå§‹å€¼ã€å°±è¦ç”¨ .Interface()
- Interface() è¿”å›å€¼æ˜¯ interface{}
- ç„¶åç±»å‹æ–­è¨€æ‹¿åˆ°çœŸæ­£çš„å€¼ï¼Œç»§ç»­ç”¨

------

## ğŸ§  ä¸€å›¾æ€»ç»“ï¼š

```
å€¼ num=100 --> ç©ºæ¥å£ i=interface{} --> reflect.Value reValue --> reValue.Int()
                                     \
                                      --> reValue.Interface()=interface{} --> ç±»å‹æ–­è¨€ .(int) --> n=100
```

------

## ğŸš€ ä¸€å¥è¯æ€»ç»“ï¼š

> Go çš„åå°„ï¼šå…ˆæ‹¿åˆ° Type å’Œ Valueï¼Œå¦‚æœè¦ç”¨ Value çš„çœŸå®å€¼ï¼š
>
> - ç”¨ reValue.Int()/String() ç­‰ç›´æ¥å–
> - æˆ–è€… reValue.Interface() è½¬å› interface{}ï¼Œå†ç±»å‹æ–­è¨€æ‹¿åˆ°åŸå§‹ç±»å‹

------

âš¡ åå°„çµæ´»ï¼Œä½†æ…¢ï¼Œä¸å»ºè®®é¢‘ç¹ç”¨ã€‚

# **å¯¹ç»“æ„ä½“ç±»å‹åå°„**

ã€1ã€‘åå°„ç›¸å…³çš„å‡½æ•°
 1)reflect.TypeOf(å˜é‡å)ï¼Œè·å–å˜é‡çš„ç±»å‹ï¼Œè¿”å›reflect.Typeç±»å‹
 2)reflect.ValueOf(å˜é‡å)ï¼Œè·å–å˜é‡çš„å€¼ï¼Œè¿”å›reflect.Valueç±»å‹(reflect.Valueæ˜¯ä¸€ä¸ªç»“æ„ä½“ç±»å‹),é€šè¿‡reflect.Valueï¼Œå¯ä»¥è·å–åˆ°å…³äºè¯¥å˜é‡çš„å¾ˆå¤šä¿¡æ¯ã€‚
 ã€2ã€‘ä»£ç ï¼š

```go
package main

import (
	"fmt"
	"reflect"
)

//åˆ©ç”¨ä¸€ä¸ªå‡½æ•°,å‡½æ•°çš„å‚æ•°å®šä¹‰ä¸ºç©ºæ¥å£:
func testReflect(i interface{})  {//ç©ºæ¥å£æ²¡æœ‰ä»»ä½•æ–¹æ³•ï¼Œæ‰€ä»¥å¯ä»¥ç†è§£ä¸ºæ‰€æœ‰ç±»å‹éƒ½å®ç°äº†ç©ºæ¥å£ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºæˆ‘ä»¬å¯ä»¥æŠŠä»»ä½•ä¸€ä¸ªå˜é‡èµ‹ç»™ç©ºæ¥å£ã€‚
	//1.è°ƒç”¨TypeOfå‡½æ•°,è¿”å›reflect.Typeç±»å‹æ•°æ®:
	reType := reflect.TypeOf(i)
	fmt.Println("reType:",reType)
	fmt.Printf("reTypeçš„å…·ä½“ç±»å‹æ˜¯:%T",reType)
	//2.è°ƒç”¨ValueOfå‡½æ•°,è¿”å›reflect.Valueç±»å‹æ•°æ®:
	reValue := reflect.ValueOf(i)
	fmt.Println("reValue",reValue)
	fmt.Printf("reValueçš„å…·ä½“ç±»å‹æ˜¯:%T",reValue)
	

	//reValueè½¬æˆç©ºæ¥å£ï¼š
	i2 := reValue.Interface()
	//ç±»å‹æ–­è¨€ï¼š
	n ,flag := i2.(Student)
	if flag == true {//æ–­è¨€æˆåŠŸ
		fmt.Printf("å­¦ç”Ÿçš„åå­—æ˜¯:%v,å­¦ç”Ÿçš„å¹´é¾„æ˜¯%v",n.Name,n.Age)
	}

}

type Student struct{
	Name string
	Age int

}


func main()  {
	//å¯¹ç»“æ„ä½“ç±»å‹è¿›è¡Œåå°„:
	//å®šä¹‰ç»“æ„ä½“å…·ä½“çš„ç±»å‹:
	stu := Student{
		Name: "ä¸½ä¸½",
		Age: 18,
	}
	testReflect(stu)

}
```

# **è·å–å˜é‡çš„ç±»åˆ«**

ã€1ã€‘è·å–å˜é‡çš„ç±»åˆ«ï¼šä¸¤ç§æ–¹å¼ï¼š
 (1) reflect.Type.Kind0
 (2)reflect.Value.Kind0
 ã€2ã€‘Kindçš„å€¼æ˜¯å¸¸é‡å€¼ï¼š

### type [Kind](https://github.com/golang/go/blob/master/src/reflect/type.go?name=release#208)

```
type Kind uint
```

Kindä»£è¡¨Typeç±»å‹å€¼è¡¨ç¤ºçš„å…·ä½“åˆ†ç±»ã€‚é›¶å€¼è¡¨ç¤ºéæ³•åˆ†ç±»ã€‚

```
const (
    Invalid Kind = iota
    Bool
    Int
    Int8
    Int16
    Int32
    Int64
    Uint
    Uint8
    Uint16
    Uint32
    Uint64
    Uintptr
    Float32
    Float64
    Complex64
    Complex128
    Array
    Chan
    Func
    Interface
    Map
    Ptr
    Slice
    String
    Struct
    UnsafePointer
)
```

ã€3ã€‘ä»£ç ï¼š

```go
package main

import (
	"fmt"
	"reflect"
)

//åˆ©ç”¨ä¸€ä¸ªå‡½æ•°,å‡½æ•°çš„å‚æ•°å®šä¹‰ä¸ºç©ºæ¥å£:
func testReflect(i interface{})  {//ç©ºæ¥å£æ²¡æœ‰ä»»ä½•æ–¹æ³•ï¼Œæ‰€ä»¥å¯ä»¥ç†è§£ä¸ºæ‰€æœ‰ç±»å‹éƒ½å®ç°äº†ç©ºæ¥å£ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºæˆ‘ä»¬å¯ä»¥æŠŠä»»ä½•ä¸€ä¸ªå˜é‡èµ‹ç»™ç©ºæ¥å£ã€‚
	//1.è°ƒç”¨TypeOfå‡½æ•°,è¿”å›reflect.Typeç±»å‹æ•°æ®:
	reType := reflect.TypeOf(i)

	//2.è°ƒç”¨ValueOfå‡½æ•°,è¿”å›reflect.Valueç±»å‹æ•°æ®:
	reValue := reflect.ValueOf(i)

	
	//è·å–å˜é‡çš„ç±»åˆ«ï¼š
	//(1)reType.kind()
	k1:=reType.Kind()
	fmt.Println(k1)

	//(2)reValue.kind()
	k2:=reValue.Kind()
	fmt.Println(k2)

	//è·å–å˜é‡çš„ç±»å‹ï¼š
	//reValueè½¬æˆç©ºæ¥å£ï¼š
	i2 := reValue.Interface()
	//ç±»å‹æ–­è¨€ï¼š
	n ,flag := i2.(Student)
	if flag == true {//æ–­è¨€æˆåŠŸ
		fmt.Printf("ç»“æ„ä½“çš„ç±»å‹æ˜¯:%T",n)
	}
}

type Student struct{
	Name string
	Age int

}


func main()  {
	//å¯¹ç»“æ„ä½“ç±»å‹è¿›è¡Œåå°„:
	//å®šä¹‰ç»“æ„ä½“å…·ä½“çš„ç±»å‹:
	stu := Student{
		Name: "ä¸½ä¸½",
		Age: 18,
	}
	testReflect(stu)

}
```

# **é€šè¿‡åå°„ä¿®æ”¹å˜é‡**

ã€1ã€‘ä¿®æ”¹åŸºæœ¬æ•°æ®ç±»å‹çš„å€¼ï¼š

```go
package main

import (
	// "fmt"
	"fmt"
	"reflect"
)

//åˆ©ç”¨ä¸€ä¸ªå‡½æ•°,å‡½æ•°çš„å‚æ•°å®šä¹‰ä¸ºç©ºæ¥å£:
func testReflect(i interface{})  {//ç©ºæ¥å£æ²¡æœ‰ä»»ä½•æ–¹æ³•ï¼Œæ‰€ä»¥å¯ä»¥ç†è§£ä¸ºæ‰€æœ‰ç±»å‹éƒ½å®ç°äº†ç©ºæ¥å£ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºæˆ‘ä»¬å¯ä»¥æŠŠä»»ä½•ä¸€ä¸ªå˜é‡èµ‹ç»™ç©ºæ¥å£ã€‚
	reValue := reflect.ValueOf(i)
	//é€šè¿‡SetInt()æ¥æ”¹å˜å€¼:
	reValue.Elem().SetInt(40)

}
func main()  {
	//å¯¹åŸºæœ¬æ•°æ®ç±»å‹è¿›è¡Œåå°„:
	//å®šä¹‰ä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹:
	var num int = 100
	testReflect(&num)//ä¼ å…¥æŒ‡é’ˆåœ°å€
	fmt.Println(num)
}
```

#### func (Value) [Elem](https://github.com/golang/go/blob/master/src/reflect/value.go?name=release#831)

```
func (v Value) Elem() Value
```

Elemè¿”å›væŒæœ‰çš„æ¥å£ä¿ç®¡çš„å€¼çš„Valueå°è£…ï¼Œæˆ–è€…væŒæœ‰çš„æŒ‡é’ˆæŒ‡å‘çš„å€¼çš„Valueå°è£…ã€‚å¦‚æœvçš„Kindä¸æ˜¯Interfaceæˆ–Pträ¼španicï¼›å¦‚æœvæŒæœ‰çš„å€¼ä¸ºnilï¼Œä¼šè¿”å›Valueé›¶å€¼ã€‚

# **é€šè¿‡åå°„æ“ä½œç»“æ„ä½“çš„å±æ€§å’Œæ–¹æ³•**

ã€1ã€‘ä»£ç ï¼š(ç†ŸçŸ¥APIï¼‰

```go
package main

import (
	// "fmt"
	"fmt"
	"reflect"
)
//å®šä¹‰ä¸€ä¸ªç»“æ„ä½“:
type Student struct {
	Name string
	Age int
}

//ç»™ç»“æ„ä½“ç»‘å®šæ–¹æ³•:
func (s Student)CPrint(){
	fmt.Println("è°ƒç”¨äº†CPrint()æ–¹æ³•")
	fmt.Println("å­¦ç”Ÿçš„åå­—æ˜¯:",s.Name)
}

func (s Student)AGetSum(n1,n2 int) int {
	fmt.Println("è°ƒç”¨äº†AGetSum()æ–¹æ³•")
	return n1+ n2
}

func (s Student)BSet(name string,age int)  {
	fmt.Println("è°ƒç”¨äº†BSet()æ–¹æ³•")
	s.Name = name
	s.Age = age
}

//å®šä¹‰å‡½æ•°æ“ä½œç»“æ„ä½“è¿›è¡Œåå°„æ“ä½œ:
func TestStudentStruct(a interface{})  {
	//aè½¬æˆreflect.Valueç±»å‹:
	val := reflect.ValueOf(a)
	fmt.Println(val)



	//é€šè¿‡Ireflect.Valueç±»å‹æ“ä½œç»“æ„ä½“å†…éƒ¨çš„å­—æ®µï¼š
	n1 := val.NumField()
	fmt.Println(n1)
	//éå†-è·å–å…·ä½“çš„å­—æ®µ:
	for i:=0;i<n1;i++{
		fmt.Printf("ç¬¬%dä¸ªå­—æ®µçš„å€¼æ˜¯:%v\n",i,val.Field(i))
	}


	//é€šè¿‡reflect.Valueç±»å‹æ“ä½œç»“æ„ä½“å†…éƒ¨çš„æ–¹æ³•ï¼š
	n2 := val.NumMethod()
	fmt.Println(n2)

	//è°ƒç”¨CPrint()æ–¹æ³•:
	//è°ƒç”¨æ–¹æ³•,æ–¹æ³•çš„é¦–å­—æ¯å¿…é¡»å¤§å†™æ‰èƒ½ç”¨=æœ‰å¯¹åº”çš„åå°„çš„è®¿é—®æƒé™
	//æ–¹æ³•çš„é¡ºåºæŒ‰ç…§ASCIIçš„é¡ºåºæ’åˆ—çš„,a,b,c,,,,,ç´¢å¼•:

	val.Method(2).Call(nil)

	//è°ƒç”¨AGetSumæ–¹æ³•:
	//å®šä¹‰Valueçš„åˆ‡ç‰‡:
	var params []reflect.Value
	params = append(params, reflect.ValueOf(10))
	params = append(params, reflect.ValueOf(20))
	result := val.Method(0).Call(params)
	fmt.Println("AGetSumæ–¹æ³•çš„è¿”å›å€¼ä¸º:",result[0].Int())
}
func main()  {
	s:= Student{
		Name: "ä¸½ä¸½",
		Age: 18,
	}
	//è°ƒç”¨TestStudentStruct:
	TestStudentStruct(s)
}
```

# **é€šè¿‡åå°„ä¿®æ”¹å˜é‡**

ã€1ã€‘ä»£ç ï¼š

```go
package main

import (
	// "fmt"
	"fmt"
	"reflect"
)
//å®šä¹‰ä¸€ä¸ªç»“æ„ä½“:
type Student struct {
	Name string
	Age int
}

//ç»™ç»“æ„ä½“ç»‘å®šæ–¹æ³•:
func (s Student)CPrint(){
	fmt.Println("è°ƒç”¨äº†CPrint()æ–¹æ³•")
	fmt.Println("å­¦ç”Ÿçš„åå­—æ˜¯:",s.Name)
}

func (s Student)AGetSum(n1,n2 int) int {
	fmt.Println("è°ƒç”¨äº†AGetSum()æ–¹æ³•")
	return n1+ n2
}

func (s Student)BSet(name string,age int)  {
	fmt.Println("è°ƒç”¨äº†BSet()æ–¹æ³•")
	s.Name = name
	s.Age = age
}

//å®šä¹‰å‡½æ•°æ“ä½œç»“æ„ä½“è¿›è¡Œåå°„æ“ä½œ:
func TestStudentStruct(a interface{})  {
	//aè½¬æˆreflect.Valueç±»å‹:
	val := reflect.ValueOf(a)
	fmt.Println(val)

	n := val.Elem().NumField()
	fmt.Println(n)

	//ä¿®æ”¹å­—æ®µçš„å€¼:
	val.Elem().Field(0).SetString("å¼ ä¸‰")


}
func main()  {
	s:= Student{
		Name: "ä¸½ä¸½",
		Age: 18,
	}
	//è°ƒç”¨TestStudentStruct:
	TestStudentStruct(&s)
	fmt.Println(s)
}
```

âœ… åå°„åˆ°åº•æœ‰ä»€ä¹ˆç”¨ï¼Ÿ
 âœ… ä¸ºä»€ä¹ˆä¸ç”¨æ­£å¸¸å†™æ³•è€Œè¦ç”¨åå°„ï¼Ÿ
 âœ… å®é™…é¡¹ç›®é‡Œä»€ä¹ˆæƒ…å†µä¸‹æ‰ç”¨ï¼Ÿ

æˆ‘å¸®ä½ ä»åŸç†ã€ä½œç”¨åˆ°å®é™…åº”ç”¨è¯¦ç»†è®²è§£ï¼š

------

## ğŸ§ª ğŸ“¦ åå°„çš„æœ¬è´¨ï¼š

åå°„å°±æ˜¯åœ¨è¿è¡Œæ—¶ï¼ˆruntimeï¼‰è·å–ã€ä¿®æ”¹å¯¹è±¡çš„ç»“æ„å’Œè¡Œä¸ºï¼š

- è·å–ï¼šæŸ¥çœ‹ä¸€ä¸ªå˜é‡çš„ç±»å‹ã€å­—æ®µã€æ–¹æ³•
- ä¿®æ”¹ï¼šä¿®æ”¹å­—æ®µå€¼
- è°ƒç”¨ï¼šåŠ¨æ€è°ƒç”¨æ–¹æ³•

è€Œä¸æ˜¯åœ¨ç¼–è¯‘æœŸå°±å†™æ­»ã€‚

------

## ğŸ¯ ä¸ºä»€ä¹ˆä¸ç”¨æ­£å¸¸å†™æ³•ï¼Œè€Œç”¨åå°„ï¼Ÿ

æ­£å¸¸å†™ï¼š

```go
s.Name = "å¼ ä¸‰"
fmt.Println(s.AGetSum(1, 2))
```

ä¼˜ç‚¹ï¼š

- ç®€æ´
- ç±»å‹å®‰å…¨ï¼ˆç¼–è¯‘æ—¶æ£€æŸ¥ï¼‰

------

åå°„å†™ï¼š

- ä¸çŸ¥é“å˜é‡å…·ä½“ç±»å‹ï¼ŒåªçŸ¥é“å®ƒæ˜¯ interface{}
- è¦åˆ°è¿è¡Œæ—¶å†ç¡®å®šå­—æ®µåã€æ–¹æ³•åã€å‚æ•°ä¸ªæ•°
- å¯ä»¥å†™ã€Œé€šç”¨ã€ä»£ç ï¼Œå¯¹å¾ˆå¤šä¸åŒç±»å‹å¯¹è±¡è¿›è¡ŒåŒæ ·çš„å¤„ç†

------

## ğŸ§° å®é™…é¡¹ç›®ä¸­å¸¸è§ç”¨é€”ï¼š

ä¸‹é¢ä¸¾å‡ ä¸ªç»å…¸ä¾‹å­ï¼š

### 1ï¸âƒ£ é€šç”¨åºåˆ—åŒ– / ååºåˆ—åŒ–

æ¯”å¦‚ï¼š

- æŠŠç»“æ„ä½“è½¬ JSON
- ä» JSON è½¬ç»“æ„ä½“

ä½ éœ€è¦åŠ¨æ€è®¿é—®ç»“æ„ä½“å­—æ®µï¼š

```go
for i := 0; i < val.NumField(); i++ {
   fieldName := val.Type().Field(i).Name
   fieldValue := val.Field(i).Interface()
   // ç»„è£…æˆ map/json
}
```

Go è‡ªå¸¦çš„ encoding/json åŒ…å°±å¤§é‡ç”¨åå°„å®ç°ã€‚

------

### 2ï¸âƒ£ ORM æ¡†æ¶ï¼ˆå¯¹è±¡å…³ç³»æ˜ å°„ï¼‰

æ¯”å¦‚ GORMï¼š

- ç”¨æˆ·å®šä¹‰ç»“æ„ä½“ï¼š

  ```go
  type User struct {
      ID int
      Name string
  }
  ```

- æ¡†æ¶éœ€è¦è‡ªåŠ¨ç”Ÿæˆ SQLï¼š

  ```sql
  INSERT INTO users (id, name) VALUES (?, ?)
  ```

- å°±éœ€è¦ç”¨åå°„è·å–å­—æ®µåã€å­—æ®µå€¼ã€‚

------

### 3ï¸âƒ£ å†™é€šç”¨å·¥å…· / åº“

æ¯”å¦‚å†™ä¸€ä¸ªï¼š

- æ—¥å¿—å·¥å…·ï¼šèƒ½æ‰“å°ä»»æ„ç»“æ„ä½“å†…å®¹
- éªŒè¯å·¥å…·ï¼šæ ¡éªŒç»“æ„ä½“å­—æ®µ
- Web æ¡†æ¶ï¼šæŠŠ HTTP è¯·æ±‚å‚æ•°è‡ªåŠ¨ç»‘å®šåˆ°ç»“æ„ä½“

è¿™äº›éƒ½éœ€è¦å¯¹ã€ŒæœªçŸ¥ç±»å‹ã€åšæ“ä½œï¼Œåªèƒ½åœ¨è¿è¡Œæ—¶ç”¨åå°„ã€‚

------

### 4ï¸âƒ£ RPC æ¡†æ¶ / æ¥å£æ³¨å†Œ

æ¯”å¦‚å†™ä¸€ä¸ªè¿œç¨‹è°ƒç”¨æ¡†æ¶ï¼š

- ç”¨æˆ·å†™äº†ï¼š

  ```go
  func Add(a, b int) int { return a+b }
  ```

- æ¡†æ¶åœ¨å¯åŠ¨æ—¶ï¼ŒæŠŠè¿™ä¸ªå‡½æ•°æ³¨å†Œåˆ°ä¸€ä¸ª map

- æ”¶åˆ°ç½‘ç»œè¯·æ±‚æ—¶ï¼Œæ ¹æ®å‡½æ•°ååŠ¨æ€æ‰¾åˆ°æ–¹æ³•ï¼Œç”¨åå°„è°ƒç”¨

------

## ğŸš€ æ€»ç»“ä¸€å¥è¯ï¼š

> åå°„çš„ä½œç”¨æ˜¯ï¼šåœ¨ä¸çŸ¥é“ç±»å‹æˆ–å­—æ®µ/æ–¹æ³•åçš„æƒ…å†µä¸‹ï¼Œåœ¨è¿è¡Œæ—¶å¯¹å¯¹è±¡è¿›è¡Œç»Ÿä¸€ã€åŠ¨æ€çš„æ“ä½œã€‚

------

## âš ï¸ æ³¨æ„ï¼š

- åå°„çµæ´»ï¼Œä½†æœ‰ç¼ºç‚¹ï¼š
  - æ€§èƒ½æ…¢ï¼ˆéœ€è¦åšå¾ˆå¤šè¿è¡Œæ—¶æ£€æŸ¥ï¼‰
  - å†™èµ·æ¥å¤æ‚
  - å¤±å»ç±»å‹å®‰å…¨
- æ‰€ä»¥ï¼šæ­£å¸¸ä¸šåŠ¡é€»è¾‘å°½é‡ä¸ç”¨åå°„ï¼Œåªåœ¨åšæ¡†æ¶ã€é€šç”¨åº“ã€å·¥å…·æ—¶ç”¨ã€‚

------
